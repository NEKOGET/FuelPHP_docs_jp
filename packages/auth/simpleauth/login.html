<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="./../../../assets/css/combined.css">
	<link rel="shortcut icon" href="./../../../favicon.ico" />
	<script src="http://www.google.com/jsapi" type="text/javascript"></script>
	<script type="text/javascript">
		var path = './../../../';
		var class_prefix = "$object->";
	</script>
	<script src="./../../../assets/js/combined.js"></script>
	<title>Login - SimpleAuth - Auth パッケージ - FuelPHP ドキュメント</title>
</head>
<body>
	<div id="container">
		<header id="header">
			<div class="table">
				<h1>
					<strong>FuelPHP, a PHP 5.3 Framework</strong>
					Documentation
				</h1>

				<form id="google_search">
					<p>
						<span id="search_clear">&nbsp;</span>
						<input type="submit" name="search_submit" id="search_submit" value="検索" />
						<input type="text" value="" id="search_input" name="search_input" />
					</p>
				</form>
			</div>
			<nav>

				<div class="clear"></div>
			</nav>
			<a href="#" id="toc_handle">目次</a>
			<div class="clear"></div>
		</header>

		<div id="cse">
			<div id="cse_point"></div>
			<div id="cse_content"></div>
		</div>

		<div id="main">
			<h2 id="simplelogin">SimpleAuth Login</h2>

			<p>
				Auth パッケージの <a href="../intro.html">はじめに</a> で述べたとおり、認証システムは 3 つのドライバで成り立っており、
				それぞれがシステムの一部として機能します。
			</p>
			<p>
				SimpleAuth Login ドライバは、ローカルのデータベーステーブルに保存するユーザアカウントの、
				生成・更新・削除・検証のロジックを提供します。ユーザアカウントの情報を得たり、パスワードの作成やリセット、
				ログインやログアウト（ユーザセッションの作成）を扱うためのものです。
			</p>

			<h3 id="classmethods">クラスメソッド</h3>

				<article>
					<h4 id="method_validate_user" class="method">validate_user($username_or_email = '', $password = '')</h4>
					<p><strong>validate_user</strong> メソッドはログインを検証します。認証情報として、ユーザ名とメールアドレスの両方をサポートしています。</p>
					<table class="method">
						<tbody>
						<tr>
							<th class="legend">Static</th>
							<td>No</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								<table class="parameters">
									<tr>
										<th>パラメータ</th>
										<th>規定値</th>
										<th class="description">説明</th>
									</tr>
									<tr>
										<th><kbd>$username_or_email</kbd></th>
										<td>必須</td>
										<td>ユーザ名またはメールアドレス</td>
									</tr>
									<tr>
										<th><kbd>$password</kbd></th>
										<td>必須</td>
										<td>ユーザのパスワード</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td>mixed 。認証に失敗すれば <strong>false</strong> を、成功した場合はユーザ情報の<strong>配列</strong>を返す。</td>
						</tr>
						</tbody>
					</table>
				</article>

				<article>
					<h4 id="method_login" class="method">login($username_or_email = '', $password = '')</h4>
					<p><strong>login</strong> メソッドはログインリクエストを扱います。ログインする前に validate_user() を呼び出し、リクエストを検証します。</p>
					<table class="method">
						<tbody>
						<tr>
							<th class="legend">Static</th>
							<td>No</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								<table class="parameters">
									<tr>
										<th>パラメータ</th>
										<th>規定値</th>
										<th class="description">説明</th>
									</tr>
									<tr>
										<th><kbd>$username_or_email</kbd></th>
										<td>必須</td>
										<td>ユーザ名またはメールアドレス</td>
									</tr>
									<tr>
										<th><kbd>$password</kbd></th>
										<td>必須</td>
										<td>ユーザのパスワード</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td>論理型。ログインに成功すれば <strong>true</strong> を、そうでなければ <strong>false</strong> を返す。</td>
						</tr>
						</tbody>
					</table>
					<p class="note">ログイン成功後、 'username' と現在の 'login_hash' が、セッション変数として利用できます。</p>
				</article>

				<article>
					<h4 id="method_force_login" class="method">force_login($user_ids = '')</h4>
					<p>
						<strong>force_login</strong> メソッドは強制的なログインリクエストを扱います。ユーザ id が手元にあり
						パスワードがわかっていないときに自動ログインさせるために利用できます。「ログイン状態を保持する」機能として利用できます。</p>
					<table class="method">
						<tbody>
						<tr>
							<th class="legend">Static</th>
							<td>No</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								<table class="parameters">
									<tr>
										<th>パラメータ</th>
										<th>規定値</th>
										<th class="description">説明</th>
									</tr>
									<tr>
										<th><kbd>$user_id</kbd></th>
										<td>必須</td>
										<td>ログインさせたいユーザの id</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td>論理型。ログインに成功すれば <strong>true</strong> を、そうでなければ <strong>false</strong> を返す。</td>
						</tr>
						</tbody>
					</table>
				</article>

				<article>
					<h4 id="method_logout" class="method">logout()</h4>
					<p><strong>logout</strong> メソッドは現在ログイン中のユーザをログアウトさせます。</p>
					<table class="method">
						<tbody>
						<tr>
							<th class="legend">Static</th>
							<td>No</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								なし
							</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td>論理型。ログアウトが成功し場合、 <strong>true</strong> を、そうでなければ <strong>false</strong> を返す。</td>
						</tr>
						</tbody>
					</table>
					<p class="note">ゲストユーザをサポートする場合は、ログアウト成功後に現在のユーザとしてゲストをセットアップします。</p>
				</article>

				<article>
					<h4 id="method_create_user" class="method">create_user($username, $password, $email, $group = 1, Array $profile_fields = array())</h4>
					<p>
						<strong>create_user</strong> メソッドは、ユーザ情報テーブルに新しいユーザレコードを作成します。
					</p>
					<table class="method">
						<tbody>
						<tr>
							<th class="legend">Static</th>
							<td>No</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								<table class="parameters">
									<tr>
										<th>パラメータ</th>
										<th>規定値</th>
										<th class="description">説明</th>
									</tr>
									<tr>
										<th><kbd>$username</kbd></th>
										<td>必須</td>
										<td>作成するユーザ名。</td>
									</tr>
									<tr>
										<th><kbd>$password</kbd></th>
										<td>必須</td>
										<td>作成するユーザのパスワード</td>
									</tr>
									<tr>
										<th><kbd>$email</kbd></th>
										<td>必須</td>
										<td>作成するユーザのメールアドレス</td>
									</tr>
									<tr>
										<th><kbd>$group</kbd></th>
										<td>1</td>
										<td>作成するユーザの所属グループ。デフォルトではグループ 1 に所属します。</td>
									</tr>
									<tr>
										<th><kbd>$profile_fields</kbd></th>
										<td><pre class="php"><code>array()</code></pre>
										<td>作成するユーザの追加プロフィールフィールド</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr>
							<th>例外</th>
							<td>SimpleUserUpdateException</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td>mixed 。作成されたユーザレコードの id を返す。作成に失敗した場合は <strong>false</strong> を返す。</td>
						</tr>
						</tbody>
					</table>
				</article>

				<article>
					<h4 id="method_update_user" class="method">update_user($values, $username = null)</h4>
					<p>
						<strong>update_user</strong> メソッドは、ユーザレコードの更新を行います。
					</p>
					<table class="method">
						<tbody>
						<tr>
							<th class="legend">Static</th>
							<td>No</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								<table class="parameters">
									<tr>
										<th>パラメータ</th>
										<th>規定値</th>
										<th class="description">説明</th>
									</tr>
									<tr>
										<th><kbd>$values</kbd></th>
										<td><pre class="php"><code>array()</code></pre>
										<td>カラム名と値がペアになった連想配列、もしくは、更新したいプロフィールフィールド</td>
									</tr>
									<tr>
										<th><kbd>$username</kbd></th>
										<td>必須</td>
										<td>更新したいユーザのユーザ名（訳注：'you want to create' になっているが、'update' の間違いと思われる）</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr>
							<th>例外</th>
							<td>SimpleUserUpdateException</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td>論理型。カラムが更新されれば <strong>true</strong> を、どのカラムも変更がなければ <strong>false</strong> を返す。</td>
						</tr>
						</tbody>
					</table>
					<p class="note">
						このメソッドではユーザ名の変更が<strong>できない</strong>ことに注意。また、セキュリティ対策として、
						パスワードを変更する場合は、現在のパスワードを $values に "old_password" として渡す必要があります。
					</p>
				</article>

				<article>
					<h4 id="method_change_password" class="method">change_password($old_password, $new_password, $username = null)</h4>
					<p>
						<strong>change_password</strong> は、ユーザパスワードの変更ができます。
					</p>
					<table class="method">
						<tbody>
						<tr>
							<th class="legend">Static</th>
							<td>No</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								<table class="parameters">
									<tr>
										<th>パラメータ</th>
										<th>規定値</th>
										<th class="description">説明</th>
									</tr>
									<tr>
										<th><kbd>$old_password</kbd></th>
										<td>必須</td>
										<td>ユーザの現在のパスワード</td>
									</tr>
									<tr>
										<th><kbd>$new_password</kbd></th>
										<td>必須</td>
										<td>ユーザの新しいパスワード</td>
									</tr>
									<tr>
										<th><kbd>$username</kbd></th>
										<td>必須</td>
										<td>パスワードを変更したいユーザのユーザ名</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr>
							<th>例外</th>
							<td>SimpleUserUpdateException</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td>論理型。パスワードが変更されれば <strong>true</strong> を、 $old_password が正しくなければ <strong>false</strong> を返す。</td>
						</tr>
						</tbody>
					</table>
				</article>

				<article>
					<h4 id="method_reset_password" class="method">reset_password($username)</h4>
					<p>
						<strong>reset_password</strong> メソッドは、ユーザに新しいランダムなパスワードを割り当てます。
					</p>
					<table class="method">
						<tbody>
						<tr>
							<th class="legend">Static</th>
							<td>No</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								<table class="parameters">
									<tr>
										<th>パラメータ</th>
										<th>規定値</th>
										<th class="description">説明</th>
									</tr>
									<tr>
										<th><kbd>$username</kbd></th>
										<td>必須</td>
										<td>パスワードをリセットしたいユーザのユーザ名</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr>
							<th>例外</th>
							<td>SimpleUserUpdateException</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td>文字列、生成されたランダムなパスワード。</td>
						</tr>
						</tbody>
					</table>
				</article>

				<article>
					<h4 id="method_delete_user" class="method">delete_user($username)</h4>
					<p>
						<strong>delete_user</strong> メソッドは、ユーザアカウントを削除します。
					</p>
					<table class="method">
						<tbody>
						<tr>
							<th class="legend">Static</th>
							<td>No</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								<table class="parameters">
									<tr>
										<th>パラメータ</th>
										<th>規定値</th>
										<th class="description">説明</th>
									</tr>
									<tr>
										<th><kbd>$username</kbd></th>
										<td>必須</td>
										<td>削除したいユーザのユーザ名</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr>
							<th>例外</th>
							<td>SimpleUserUpdateException</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td>論理型。ユーザアカウントが削除されれば <strong>true</strong> を、削除に失敗した場合 （ユーザが存在しなかった場合） は <strong>false</strong> を返す。</td>
						</tr>
						</tbody>
					</table>
				</article>

				<article>
					<h4 id="method_create_login_hash" class="method">create_login_hash()</h4>
					<p><strong>create_login_hash</strong> メソッドは、現在ログイン中のユーザのログインハッシュを生成します。</p>
					<table class="method">
						<tbody>
						<tr>
							<th class="legend">Static</th>
							<td>No</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								なし
							</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td>文字列、生成されたログインハッシュ。</td>
						</tr>
						</tbody>
					</table>
				</article>

				<article>
					<h4 id="method_get_user_id" class="method">get_user_id()</h4>
					<p><strong>get_user_id</strong> メソッドは、ドライバの id 、現在ログイン中のユーザの id の配列を返します。</p>
					<table class="method">
						<tbody>
						<tr>
							<th class="legend">Static</th>
							<td>No</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								なし
							</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td>mixed 。ユーザがログイン中なら、 <strong>array([0]=>driver_id, [1]=>user_id)</strong> 形式の数値配列を、そうでなければ <strong>false</strong> を返す。</td>
						</tr>
						</tbody>
					</table>
					<p class="note">ゲストユーザをサポートしている場合、ゲストユーザのユーザ id が返るので <strong>false</strong> は返ることはありません。</p>
				</article>

				<article>
					<h4 id="method_get_groups" class="method">get_groups()</h4>
					<p><strong>get_groups</strong> メソッドは、ログイン中のユーザが所属するグループを返します。</p>
					<table class="method">
						<tbody>
						<tr>
							<th class="legend">Static</th>
							<td>No</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								なし
							</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td>mixed 。ユーザがログイン中なら、 <strong>array(array('SimpleGroup', group_id))</strong> 形式の配列を、そうでなければ <strong>false</strong> を返します。</td>
						</tr>
						</tbody>
					</table>
				</article>

				<article>
					<h4 id="method_get_email" class="method">get_email()</h4>
					<p><strong>get_email</strong> メソッドは、現在ログイン中のユーザに対応するメールアドレスを返します。</p>
					<table class="method">
						<tbody>
						<tr>
							<th class="legend">Static</th>
							<td>No</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								なし
							</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td>mixed 。ユーザがログイン中ならメールアドレスを、現在のユーザにメールアドレスがない場合やログイン中のユーザがいない場合は <strong>false</strong> を返す。</td>
						</tr>
						</tbody>
					</table>
				</article>

				<article>
					<h4 id="method_get_screen_name" class="method">get_screen_name()</h4>
					<p><strong>get_screen_name</strong> メソッドは、現在ログイン中のユーザの表示名を返します。</p>
					<table class="method">
						<tbody>
						<tr>
							<th class="legend">Static</th>
							<td>No</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								なし
							</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td>mixed 。表示名の文字列を返す。ログイン中のユーザがいなければ <strong>false</strong> を返す。</td>
						</tr>
						</tbody>
					</table>
				</article>

				<article>
					<h4 id="method_get_profile_fields" class="method">get_profile_fields($field = null, $default = null)</h4>
					<p><strong>get_profile_fields</strong> メソッドは、現在ログイン中のユーザのプロフィールフィールドを返します。</p>
					<table class="method">
						<tbody>
						<tr>
							<th class="legend">Static</th>
							<td>No</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								<table class="parameters">
									<tr>
										<th>パラメータ</th>
										<th>規定値</th>
										<th class="description">説明</th>
									</tr>
									<tr>
										<th><kbd>$field</kbd></th>
										<td><pre class="php"><code>null</code></pre>
										<td>取得したいプロフィールフィールド名。</td>
									</tr>
									<tr>
										<th><kbd>$default</kbd></th>
										<td><pre class="php"><code>null</code></pre>
										<td>取得したいプロフィールフィールドが存在しなかったときのデフォルト返り値。</td>
									</tr>
								</table>
							</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td>mixed</td>
						</tr>
						</tbody>
					</table>
				</article>

				<article>
					<h4 id="method_guest_login" class="method">guest_login()</h4>
					<p><strong>guest_login</strong> メソッドは、ゲストログインが可能か確認します。</p>
					<table class="method">
						<tbody>
						<tr>
							<th class="legend">Static</th>
							<td>No</td>
						</tr>
						<tr>
							<th>パラメータ</th>
							<td>
								なし
							</td>
						</tr>
						<tr>
							<th>返り値</th>
							<td>論理型。ゲストログインがサポートされていれば <strong>true</strong> を、そうでなければ <strong>false</strong> を返す。</td>
						</tr>
						</tbody>
					</table>
				</article>
		</div>

		<footer>
			<p>
				&copy; FuelPHP Development Team 2010-2013 - <a href="http://fuelphp.com">FuelPHP</a> is released under the MIT license.
[ <a href="https://github.com/fuel/docs/commits/1.5/develop/packages/auth/simpleauth/login.html">原文コミット履歴</a> | <a href="https://github.com/NEKOGET/FuelPHP_docs_jp/commits/1.5/develop_japanese/packages/auth/simpleauth/login.html">翻訳コミット履歴</a> | <a href="https://github.com/NEKOGET/FuelPHP_docs_jp/blob/1.5/develop_japanese/packages/auth/simpleauth/login.html">GitHubで修正</a> ]
			</p>
		</footer>
	</div>
</body>
</html>
